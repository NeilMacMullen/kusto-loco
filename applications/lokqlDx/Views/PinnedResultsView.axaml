<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:LokqlDx.ViewModels"
             xmlns:v="using:LokqlDx.Views"
             xmlns:converters="clr-namespace:LokqlDx.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="LokqlDx.Views.PinnedResultsView"
             x:DataType="vm:PinnedResultsViewModel">
    <UserControl.Resources>
        <converters:NegateBoolConverter x:Key="Negate" />
    </UserControl.Resources>
    <Border BorderThickness="1" CornerRadius="5" Background="White" Margin="2">
        <DockPanel Background="Black">

            <ScrollViewer Name="TheScrollViewer">
                <ItemsControl
                    ItemsSource="{Binding Results}"
                    Background="Black"
                    x:Name="ItemList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                            <DockPanel>
                                <Grid DockPanel.Dock="Right">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="40" />
                                        </Grid.ColumnDefinitions>

                                        <Button Grid.Column="0"
                                                Background="Black"
                                                HorizontalAlignment="Right"
                                                Content="&#x1F589;"
                                                FontSize="12"
                                                VerticalAlignment="Center"
                                                Margin="4,0,4,0"
                                                DockPanel.Dock="Right"
                                                Command="{Binding $parent[v:PinnedResultsView].DataContext.ToggleEditCommand}"
                                                CommandParameter="{Binding}"
                                                Click="EditButton_Click" />
                                        <Button Grid.Column="1"
                                                Background="Black"
                                                HorizontalAlignment="Right"
                                                Content="🗑️"
                                                FontSize="12"
                                                VerticalAlignment="Center"
                                                Margin="4,0,4,0"
                                                DockPanel.Dock="Right"
                                                Command="{Binding $parent[v:PinnedResultsView].DataContext.ToggleDeleteCommand}"
                                                CommandParameter="{Binding}"
                                                Click="EditButton_Click" />
                                    </Grid>

                                </Grid>
                                <Grid DockPanel.Dock="Left">
                                    <Label
                                        Background="Black"
                                        Content="{Binding Name,Mode=TwoWay}"
                                        IsVisible="{Binding EditLocked}">


                                        <Interaction.Behaviors>
                                            <EventTriggerBehavior EventName="DoubleTapped">
                                                <InvokeCommandAction
                                                    Command="{Binding $parent[v:PinnedResultsView].DataContext.ShowCommand}"
                                                    CommandParameter="{Binding}" />
                                            </EventTriggerBehavior>
                                        </Interaction.Behaviors>
                                    </Label>

                                    <TextBox x:Name="EditTextBox"
                                             VerticalContentAlignment="Center"
                                             Text="{Binding Name,Mode=TwoWay}"
                                             IsVisible="{Binding EditLocked,

									Converter={StaticResource Negate}}"
                                             KeyDown="InputElement_OnKeyDown"
                                             />
                                </Grid>
                            </DockPanel>
                            <Label Content="{Binding Description}"></Label>    
                            </StackPanel>

						</DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </DockPanel>
    </Border>


</UserControl>
