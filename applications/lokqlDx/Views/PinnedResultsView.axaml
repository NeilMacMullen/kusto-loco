<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:LokqlDx.ViewModels"
             xmlns:v="using:LokqlDx.Views"
             xmlns:converters="clr-namespace:LokqlDx.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="LokqlDx.Views.PinnedResultsView"
             x:DataType="vm:PinnedResultsViewModel">
    <UserControl.Resources>
        <converters:BoolToBrushMultiConverter x:Key="BoolToColorMulti" />
        <converters:NegateBoolConverter x:Key="Negate" />
        <converters:BoolChooseStringConverter x:Key="ChooseString" />
        <SolidColorBrush x:Key="Visible" Color="GreenYellow" />
        <SolidColorBrush x:Key="Hidden" Color="LightGray" />
        <SolidColorBrush x:Key="Deleted" Color="OrangeRed" />
    </UserControl.Resources>
    <Border BorderThickness="1" CornerRadius="5" Background="White" Margin="2">
        <DockPanel Background="Black">

            <ScrollViewer Name="TheScrollViewer">
                <ItemsControl
                    ItemsSource="{Binding Results}"
                    Background="Black"
                    x:Name="ItemList">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <DockPanel>
                                <Grid DockPanel.Dock="Right">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="40" />
                                        </Grid.ColumnDefinitions>

                                        <Button Grid.Column="0"
                                                Background="Black"
                                                HorizontalAlignment="Right"
                                                Content="&#x1F589;"
                                                FontSize="12"
                                                VerticalAlignment="Center"
                                                Margin="4,0,4,0"
                                                DockPanel.Dock="Right"
                                                Command ="{Binding $parent[v:PinnedResultsView].DataContext.ToggleEditCommand}"
                                                Click="EditButton_Click" />
                                        <Button Grid.Column="1"
                                                Background="Black"
                                                HorizontalAlignment="Right"
                                                Content="🗑️"
                                                FontSize="12"
                                                VerticalAlignment="Center"
                                                Margin="4,0,4,0"
                                                DockPanel.Dock="Right"
                                                Command="{Binding $parent[v:PinnedResultsView].DataContext.ToggleDeleteCommand}"
                                                CommandParameter="{Binding}"
                                                Click="EditButton_Click"/>
                                    </Grid>

                                </Grid>
                                <Grid DockPanel.Dock="Left">
                                    <Label
                                        Background="Black"
                                        Content="{Binding Name,Mode=TwoWay}"
                                        IsVisible="{Binding EditLocked}">

                                    
                                        <Interaction.Behaviors>
                                            <EventTriggerBehavior EventName="DoubleTapped">
                                                <InvokeCommandAction
                                                    Command="{Binding $parent[v:PinnedResultsView].DataContext.ShowCommand}"
                                                    CommandParameter="{Binding}" />
                                            </EventTriggerBehavior>
                                        </Interaction.Behaviors>
                                    </Label>

                                    <TextBox x:Name="EditTextBox"
                                             VerticalContentAlignment="Center"
                                             Text="{Binding Name,Mode=TwoWay}"
                                             IsVisible="{Binding EditLocked,

									Converter={StaticResource Negate}}"

                                             />
                                </Grid>


                            </DockPanel>

                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </DockPanel>
    </Border>


</UserControl>
